/*
 This library is very simple and only does 1 task really
 @author: Schalk Keun
 @script: sticky-items
 @pre-req: jquery -> https://developers.google.com/speed/libraries/
 OR
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

 @implement method:
 $(document).ready(function(){
     $('.sticky-element').stickyItem({
         top: 0,
         left: 'autoload',
         margin: 0,
         customClass: 'is-sticky',
         originalWidth:'autoload', // sticky item max-width setting, is responsive by default up to max-width
         background: '#faf7f7', // sticky element background, transparent default
         stopAt: false, // hide the element when it reaches this position.
         layer: 1000, // z-index layer
         parentStyles: {}, // extend styles for the parent element
         itemStyles: {}, // extend styles for the item element
         childrenStyles: {}, // extend styles for the children element(s)
         responsive: true, // enabled by default, set to false to disable responsive calculation
         addWrapper: false, // add a class name for the wrapper
         debug: false
     });
 });
 */
!function(t){t.fn.stickyItem=function(e){function o(){if(calculatedItems=0,"string"==typeof p)if(-1!==p.indexOf(",")){d.top=0;var e=p.split(",");for(var o in e)"undefined"!=t(e[o]).html()&&(d.top+=t(e[o]).outerHeight())}else d.top=t(p).outerHeight()}function r(){return d.responsive?(o(),w=t(window).scrollTop(),d.left="autoload",d.originalWidth="autoload",u=!1,d.addWrapper&&f.parent().parent().removeAttr("style").removeClass(d.customClass),f.parent().removeAttr("style").removeClass(d.customClass),f.removeAttr("style").removeClass("is-sticky"),f.children().removeAttr("style"),v=f.offset().top,y=f.outerWidth(),g=t(window).outerWidth(),void n()):!1}function s(){u||(v=f.offset().top)}function a(){("autoload"==d.left||0!=d.left)&&(d.left=f.offset().left)}function i(){"autoload"==d.originalWidth||0==d.originalWidth?(y=f.outerWidth(),d.originalWidth=y):y=g<d.originalWidth?g:d.originalWidth}function n(){var e=parseInt(d.top)+parseInt(d.margin),o=parseInt(v-e);d.debug&&console.log("%cTo Lock at: "+o+", Current Top: "+w+", Item Top: "+v+(u?" (locked)":" (not locked)"),l),0!=d.stopAt&&w>=d.stopAt&&m?(f.parent().animate({opacity:0},200),m=!1):!m&&w<d.stopAt&&0!=d.stopAt&&(f.parent().animate({opacity:1},200),m=!0),o!=c&&(u=!1,h=0),u||0!=h||(c=o,u=!0,h=o,f.css(t.extend({background:d.background,"max-width":"100%",width:y,position:"fixed",left:d.left,top:d.top+d.margin,"z-index":d.layer},d.itemStyles)).addClass(d.customClass),0!=d.childrenStyles&&f.children().css(t.extend({width:y,margin:"auto"},d.childrenStyles)),0!=d.parentStyles&&(d.addWrapper?(f.parent().parent().css(t.extend({height:f.outerHeight(),width:"100%"},d.parentStyles)).addClass(d.customClass),f.parent().css(t.extend({height:f.outerHeight(),width:"100%",position:"fixed",left:"0",top:d.top+d.margin,"z-index":d.layer},{}))):f.parent().css(t.extend({height:f.outerHeight(),width:"100%"},d.parentStyles)).addClass(d.customClass))),(o>w||0==w)&&u&&(h=0,u=!1,0!=d.parentStyles&&(d.addWrapper&&f.parent().parent().removeAttr("style").removeClass(d.customClass),f.parent().removeAttr("style").removeClass(d.customClass)),f.removeAttr("style").removeClass(d.customClass),0!=d.childrenStyles&&f.children().removeAttr("style"))}if(void 0!==this.html()){var l="color: orange; font-size: 14px;",d=t.extend({top:0,left:"autoload",margin:0,customClass:"is-stick",background:"transparent",stopAt:!1,originalWidth:"autoload",layer:99,parentStyles:{},itemStyles:{},childrenStyles:{},addWrapper:!1,responsive:!0,debug:!1},e),p=d.top,c=0;o();var u=!1,h=0,m=!0,f=this,v=f.offset().top,y=f.outerWidth(),g=t(window).outerWidth(),w=t(window).scrollTop();d.addWrapper?f.wrap('<div class="sticky-parent"><div class="'+d.addWrapper+'"></div></div>'):f.wrap('<div class="sticky-parent"></div>'),a(),s(),n();var C=0,W=setInterval(function(){u=!1,h=0,0!=d.parentStyles&&f.parent().removeAttr("style"),f.removeAttr("style").removeClass(d.customClass),0!=d.childrenStyles&&f.children().removeAttr("style"),o(),C++,C>=10&&clearInterval(W)},250);t(window).scroll(function(){w=t(window).scrollTop(),o(),i(),a(),s(),n()}),t(window).resize(function(){g=t(window).outerWidth(),r(),i(),a(),s(),n()})}}}(jQuery);