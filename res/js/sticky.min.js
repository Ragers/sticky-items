/*
 This library is very simple and only does 1 task really
 @author: Schalk Keun
 @script: sticky-items
 @pre-req: jquery -> https://developers.google.com/speed/libraries/
 OR
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

 @implement method:
 $(document).ready(function(){
     $('.sticky-element').stickyItem({
         top: 0,
         left: 'autoload',
         originalWidth:'autoload', // sticky item max-width setting, is responsive by default up to max-width
         background: '#faf7f7', // sticky element background, transparent default
         stopAt: false, // hide the element when it reaches this position.
         layer: 1000, // z-index layer
         parentStyles: {}, // extend styles for the parent element
         itemStyles: {}, // extend styles for the item element
         childrenStyles: {}, // extend styles for the children element(s)
         responsive: true, // enabled by default, set to false to disable responsive calculation
         debug: false
     });
 });
 */
!function(t){t.fn.stickyItem=function(o){function e(){return d.responsive?("string"==typeof a&&(d.top=t(a).height()),y=t(window).scrollTop(),d.left="autoload",d.originalWidth="autoload",p=!1,h.parent().removeAttr("style"),h.removeAttr("style").removeClass("is-sticky"),h.children().removeAttr("style"),u=h.offset().top,f=h.outerWidth(),g=t(window).outerWidth(),void l()):!1}function i(){p||(u=h.offset().top)}function n(){("autoload"==d.left||0!=d.left)&&(d.left=h.offset().left)}function r(){"autoload"==d.originalWidth||0==d.originalWidth?(f=h.outerWidth(),d.originalWidth=f):f=g<d.originalWidth?g:d.originalWidth}function l(){var o=parseInt(d.top);d.debug&&(console.log("%cItem Width: "+f+", Original Width: "+d.originalWidth,s),console.log("%cTo Lock at: "+(u-o)+", Current Top: "+y,s)),0!=d.stopAt&&y>=d.stopAt&&c?(h.parent().animate({opacity:0},200),c=!1):!c&&y<d.stopAt&&0!=d.stopAt&&(h.parent().animate({opacity:1},200),c=!0),y>u-o?(p=!0,h.css(t.extend({background:d.background,"max-width":"100%",width:f,position:"fixed",left:d.left,top:d.top,"z-index":d.layer},d.itemStyles)).addClass("is-sticky"),h.children().css(t.extend({width:f,margin:"auto"},d.childrenStyles)),h.parent().css(t.extend({height:h.outerHeight(),width:"100%"},d.parentStyles))):(p=!1,h.parent().removeAttr("style"),h.removeAttr("style").removeClass("is-sticky"),h.children().removeAttr("style"))}if(void 0!==this.html()){var s="color: orange; font-size: 14px;",d=t.extend({top:0,left:"autoload",background:"transparent",stopAt:!1,originalWidth:"autoload",layer:99,parentStyles:{},itemStyles:{},childrenStyles:{},responsive:!0,debug:!1},o),a=d.top;"string"==typeof a&&(d.top=t(a).outerHeight());var p=!1,c=!0,h=this,u=h.offset().top,f=h.outerWidth(),g=t(window).outerWidth(),y=t(window).scrollTop();h.wrap("<div></div>"),n(),i(),l(),t(window).scroll(function(){y=t(window).scrollTop(),r(),n(),i(),l()}),t(window).resize(function(){g=t(window).outerWidth(),e(),r(),n(),i(),l()})}}}(jQuery);